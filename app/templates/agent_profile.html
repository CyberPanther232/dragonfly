<!-- filepath: c:\Users\kinne\Desktop\Windows_Development\dragonfly\app\templates\agent_profile.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Agent Profile: {{ agent.device_name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Agent Profile: {{ agent.device_name }}</h1>
    <h3>Agent Info</h3>
    <ul>
        <li><strong>IP:</strong> {{ agent.ip }}</li>
        <li><strong>OS:</strong> {{ agent.os }}</li>
        <li><strong>HTTP Status:</strong>
            <span class="status-{{ 'online' if agent.http == 'online' else 'offline' }}">{{ agent.http|capitalize }}</span>
        </li>
        <li><strong>SSH Status:</strong>
            <span class="status-{{ 'online' if agent.ssh == 'online' else 'offline' }}">{{ agent.ssh|capitalize }}</span>
        </li>
        <li><strong>Heartbeat:</strong>
            <span class="status-{{ 'online' if agent.heartbeat == 'online' else 'offline' }}">{{ agent.heartbeat|capitalize }}</span>
        </li>
    </ul>

    <h3>Alerts</h3>
    {% if alerts %}
    <table>
        <tr>
            <th>Timestamp</th>
            <th>Type</th>
            <th>Severity</th>
            <th>Category</th>
            <th>Details</th>
        </tr>
        {% for alert in alerts %}
        <tr>
            <td>{{ alert.timestamp }}</td>
            <td>{{ alert.alert.type }}</td>
            <td>{{ alert.alert.severity|capitalize }}</td>
            <td>{{ alert.alert.category|capitalize }}</td>
            <td>
                {% if alert.alert.log_entry %}
                    {{ alert.alert.log_entry }}
                {% elif alert.alert.details %}
                    {{ alert.alert.details }}
                {% else %}
                    N/A
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
        <p>No alerts for this agent.</p>
    {% endif %}
    <a class="back-link" href="{{ url_for('dashboard') }}">&larr; Back to Dashboard</a>
</body>
</html>